<div
  class="card-header d-flex justify-content-between align-items-center"
  [class.p-2]="padding === 'small'"
  [style.flex-shrink]="flexShrink ? 0 : null">

  <span>
    <i class="fas {{ icon }} me-2"></i>
    {{ title }}

    <!-- Total count badge -->
    @if (total !== undefined) {
      <span
        class="badge rounded-pill bg-primary text-white ms-2"
        style="font-size: 0.75rem; min-width: 24px; padding: 0.35em 0.6em;">
        {{ total }}
      </span>
    }

    <!-- Execution time badge -->
    @if (executionTime !== null && executionTime !== undefined) {
      <span
        class="badge rounded-pill ms-2"
        [class]="getTimingBadgeClass()"
        style="font-size: 0.75rem; padding: 0.35em 0.6em;"
        [title]="responseSize ? executionTime + 'ms | ' + formatResponseSize() : executionTime + 'ms'">
        <i class="fas fa-clock me-1"></i>{{ executionTime }}ms
        @if (responseSize) {
          <span class="ms-1 opacity-75">| {{ formatResponseSize() }}</span>
        }
      </span>
    }

    <!-- Content projection for badges or other content after title -->
    <ng-content select="[slot='title-suffix']"></ng-content>
  </span>

  <div class="d-flex gap-2 align-items-center">
    <!-- Pagination controls - show if any navigation link exists -->
    @if (hasLink('first') || hasLink('previous') || hasLink('next') || hasLink('last')) {
      <div class="btn-group btn-group-sm" role="group" aria-label="Pagination">
        <button
          type="button"
          class="btn btn-outline-secondary"
          [disabled]="!hasLink('first')"
          (click)="navigateTo('first')"
          title="First page">
          <i class="fas fa-angles-left"></i>
        </button>
        <button
          type="button"
          class="btn btn-outline-secondary"
          [disabled]="!hasLink('previous')"
          (click)="navigateTo('previous')"
          title="Previous page">
          <i class="fas fa-angle-left"></i>
        </button>
        <button
          type="button"
          class="btn btn-outline-secondary"
          [disabled]="!hasLink('next')"
          (click)="navigateTo('next')"
          title="Next page">
          <i class="fas fa-angle-right"></i>
        </button>
        <button
          type="button"
          class="btn btn-outline-secondary"
          [disabled]="!hasLink('last')"
          (click)="navigateTo('last')"
          title="Last page">
          <i class="fas fa-angles-right"></i>
        </button>
      </div>
    }

    <!-- Content projection for extra buttons/controls before toolbar -->
    <ng-content select="[slot='actions']"></ng-content>

    <!-- Monaco Editor Toolbar -->
    @if (showToolbar) {
      <app-json-viewer-toolbar
        [editor]="editor"
        [readOnly]="readOnly"
        [showEditButton]="showEditButton"
        [showDeleteButton]="showDeleteButton"
        [showCompareButton]="showCompareButton"
        [showCopyAsCurl]="showCopyAsCurl"
        [showEverythingButton]="showEverythingButton"
        (editClicked)="editClicked.emit()"
        (deleteClicked)="deleteClicked.emit()"
        (compareClicked)="compareClicked.emit()"
        (copyAsCurlClicked)="copyAsCurlClicked.emit()"
        (everythingClicked)="everythingClicked.emit()">
      </app-json-viewer-toolbar>
    }
  </div>
</div>
