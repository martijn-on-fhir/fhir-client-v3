<div class="pluriform-container">
  <!-- Action Bar -->
  <div class="card mb-3 border-0" style="flex-shrink: 0">
    <div class="card-body p-2">
      <div class="row g-3 align-items-end">
        <div class="col-md-10">
          <!-- Future: Add transformation options here -->
        </div>
        <div class="col-md-2">
          <button
            class="btn btn-primary w-100"
            (click)="transform()"
            [disabled]="loading()">
            @if (loading()) {
              <span class="spinner-border spinner-border-sm me-2" role="status"></span>
              Executing...
            } @else {
              <i class="fas fa-bolt me-2"></i>
              Execute
            }
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Results Panel -->
  <div class="card flex-grow-1 d-flex flex-column" style="min-height: 0">
    <app-result-header
      icon="fa-shapes"
      title="XML Transformation"
      [editor]="this.leftEditor?.editor"
      [readOnly]="false">
    </app-result-header>

    <div class="card-body flex-grow-1 overflow-hidden p-0" id="pluriform-results-container">
      <div class="d-flex h-100">
        <!-- Left Panel: XML Editor -->
        <div [style.width.%]="leftWidth()" [style.min-width.%]="leftWidth()" class="h-100 d-flex flex-column">
          <div class="flex-grow-1" style="min-height: 0">
            <app-monaco-editor #leftEditor
              [value]="leftContent()"
              (valueChange)="leftContent.set($event)"
              [language]="'xml'"
              [readOnly]="false"
              [theme]="'light'"
            />
          </div>
        </div>

        <!-- Resizable Divider -->
        <div class="resize-divider" [class.resizing]="isResizing()" (mousedown)="startResizing($event)"></div>

        <!-- Right Panel: JSON Output -->
        <div
          [style.width.%]="100 - leftWidth()"
          [style.min-width.%]="100 - leftWidth()"
          class="h-100 d-flex flex-column">
          <div class="flex-grow-1" style="min-height: 0">
            <app-monaco-editor
              #rightEditor
              [value]="rightContent()"
              [language]="'json'"
              [readOnly]="true"
              [theme]="'light'"
            />
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
