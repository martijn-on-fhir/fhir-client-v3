<div class="sidebar" [style.width.px]="sidebarWidth()">
  <!-- Sidebar Header with Filter -->
  <div class="sidebar-header">
    <div class="filter-container">
      <i class="fas fa-search filter-icon"></i>
      <input
        type="text"
        class="filter-input"
        placeholder="Filter resources..."
        [(ngModel)]="filterText"
        [value]="filterText()"
        (input)="filterText.set($any($event.target).value)"
      />
      @if (filterText()) {
        <button type="button" class="btn-clear" (click)="clearFilter()" title="Clear filter">
          <i class="fas fa-times"></i>
        </button>
      }
    </div>
  </div>

  <!-- Favorites Section -->
  @if (favorites().length > 0) {
    <div class="favorites-section">
      <button class="section-header" (click)="toggleFavorites()">
        <i class="fas fa-star text-warning"></i>
        <span>Favorites</span>
        <span class="badge bg-secondary">{{ favorites().length }}</span>
        <i class="fas fa-chevron-{{ favoritesExpanded() ? 'up' : 'down' }} ms-auto"></i>
      </button>
      @if (favoritesExpanded()) {
        <ul class="favorites-list">
          @for (fav of favorites(); track fav.id) {
            <li class="favorite-item" (click)="navigateToFavorite(fav)" [title]="fav.query">
              <i class="fas fa-{{ fav.resultType === 'single' ? 'file' : 'folder' }} favorite-icon"></i>
              <div class="favorite-content">
                <span class="favorite-name">{{ fav.displayName }}</span>
                <span class="favorite-type">{{ fav.resourceType }}</span>
              </div>
              <button class="btn-remove" (click)="removeFavorite(fav, $event)" title="Remove from favorites">
                <i class="fas fa-times"></i>
              </button>
            </li>
          }
        </ul>
      }
    </div>
  }

  <!-- Resource Types List -->
  <div class="sidebar-content">
    @if (loading()) {
      <div class="loading-state">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <p>Loading resource types...</p>
      </div>
    } @else if (error()) {
      <div class="error-state">
        <i class="fas fa-exclamation-triangle"></i>
        <p>{{ error() }}</p>
        <button type="button" class="btn btn-sm btn-primary" (click)="loadResourceTypes()">
          <i class="fas fa-redo"></i> Retry
        </button>
      </div>
    } @else if (filteredResourceTypes().length === 0) {
      <div class="empty-state">
        <i class="fas fa-search"></i>
        <p>No matching resources</p>
      </div>
    } @else {
      <ul class="resource-list">
        @for (resourceType of filteredResourceTypes(); track resourceType) {
          <li class="resource-item" (click)="selectResourceType(resourceType)">
            <i class="far fa-file resource-icon"></i>
            <span class="resource-name">{{ resourceType }}</span>
          </li>
        }
      </ul>
    }
  </div>
</div>

<!-- Resize Handle -->
<div
  class="resize-handle"
  [class.resizing]="isResizing()"
  (mousedown)="startResizing($event)"
  title="Drag to resize"
></div>
